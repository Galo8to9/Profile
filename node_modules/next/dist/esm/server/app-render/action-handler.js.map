{"version":3,"sources":["../../../src/server/app-render/action-handler.ts"],"names":["ACTION","RSC","RSC_CONTENT_TYPE_HEADER","isNotFoundError","getURLFromRedirectError","isRedirectError","RenderResult","FlightRenderResult","filterReqHeaders","actionsForbiddenHeaders","appendMutableCookies","getModifiedCookieValues","NEXT_CACHE_REVALIDATED_TAGS_HEADER","NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER","nodeToWebReadableStream","nodeReadable","process","env","NEXT_RUNTIME","Readable","require","toWeb","ReadableStream","start","controller","on","chunk","enqueue","close","error","Error","formDataFromSearchQueryString","query","searchParams","URLSearchParams","formData","FormData","key","value","append","nodeHeadersToRecord","headers","record","Object","entries","undefined","Array","isArray","join","getForwardedHeaders","req","res","requestHeaders","requestCookies","responseHeaders","getHeaders","rawSetCookies","setCookies","map","setCookie","cookie","split","mergedHeaders","mergedCookies","concat","Headers","addRevalidationHeader","staticGenerationStore","requestStore","Promise","all","pendingRevalidates","isTagRevalidated","revalidatedTags","length","isCookieRevalidated","mutableCookies","setHeader","JSON","stringify","createRedirectRenderResult","redirectUrl","startsWith","forwardedHeaders","set","host","proto","incrementalCache","requestProtocol","fetchUrl","URL","prerenderManifest","preview","previewModeId","delete","headResponse","fetch","method","next","internal","get","response","includes","body","err","console","handleAction","ComponentMod","page","serverActionsManifest","generateFlight","serverActionsBodySizeLimit","actionId","toLowerCase","contentType","isURLEncodedAction","isMultipartAction","isFetchAction","bound","workerName","serverModuleMap","Proxy","_","id","workers","name","chunks","actionAsyncStorage","actionResult","formState","run","isAction","decodeReply","decodeAction","decodeFormState","webRequest","request","action","actionReturnedState","actionData","reader","getReader","done","read","TextDecoder","decode","decodeReplyFromBusboy","busboy","bb","pipe","UndiciRequest","Request","fakeRequest","duplex","parseBody","e","statusCode","message","actionModId","actionHandler","__next_app__","returnVal","apply","resolve","skipFlight","pathWasRevalidated","type","result","from","values","promise","reject","asNotFound"],"mappings":"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"}