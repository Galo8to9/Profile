{"version":3,"sources":["../../../src/export/routes/pages.ts"],"names":["exportPages","render","args","require","renderToHTML","req","res","path","page","query","htmlFilepath","htmlFilename","ampPath","subFolders","outDir","ampValidatorPath","pagesDataDir","buildExport","isDynamic","hasOrigQueryValues","renderOpts","components","ampState","ampFirst","pageConfig","amp","hasQuery","Boolean","hybrid","inAmpMode","isInAmpMode","hybridAmp","getServerSideProps","Error","SERVER_PROPS_EXPORT_ERROR","getStaticProps","endsWith","renderResult","Component","RenderResult","fromStatic","optimizeFonts","process","env","__NEXT_OPTIMIZE_FONTS","JSON","stringify","optimizeCss","__NEXT_OPTIMIZE_CSS","err","digest","NEXT_DYNAMIC_NO_SSR_CODE","ssgNotFound","metadata","isNotFound","ampValidations","validateAmp","rawAmpHtml","ampPageName","validatorPath","validator","AmpHtmlValidator","getInstance","result","validateString","errors","filter","e","severity","warnings","length","push","html","isNull","toUnchunkedString","ampRenderResult","ampSkipValidation","ampHtmlFilename","join","ampBaseDir","dirname","ampHtmlFilepath","exists","fileExists","FileType","File","ampHtml","fs","mkdir","recursive","writeFile","pageData","dataFile","replace","fromBuildExportRevalidate","revalidate"],"mappings":"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"}